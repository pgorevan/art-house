version: 0.2
phases:
 build:
   commands:
     - echo Build started on `date`
     - echo Installing composer deps
     - composer install --no-progress --no-suggest
     - cp socket-live.js socket.js
     - rm socket-live.js
     - npm install
     - npm run eslint
     - npm test
     - npm run production

 post_build:
   commands:
     - echo Build completed on `date`
     - ./vendor/bin/phpunit
     - ./vendor/bin/phpcs -n --standard=PSR2 --colors app/
     - rm -rf vendor

artifacts:
  files:
    - '**/*'
